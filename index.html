<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dollar Printer Pro | Automated Trading Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #00ff88; --bg: #0b0e11; --card: #151a21; }
        body { background: var(--bg); color: #eef2f3; font-family: 'Segoe UI', Roboto, sans-serif; }
        .printer-card { background: var(--card); border: 1px solid #2a2e39; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .accent-text { color: var(--primary); text-shadow: 0 0 10px rgba(0,255,136,0.3); }
        .btn-glow:hover { box-shadow: 0 0 20px rgba(0,255,136,0.4); transform: translateY(-2px); }
        .journal-feed { height: 250px; overflow-y: auto; scrollbar-width: thin; background: #080a0d; border-radius: 8px; font-family: 'Courier New', Courier, monospace; }
        .digit-stat { background: #1c222d; border: 1px solid #2d3446; transition: 0.3s; }
        .digit-stat.active { border-color: var(--primary); background: rgba(0,255,136,0.1); }
    </style>
</head>
<body class="p-2 md:p-6">
    <div class="max-w-7xl mx-auto">
        <div class="printer-card p-4 mb-6 flex flex-wrap justify-between items-center gap-4">
            <div class="flex items-center gap-3">
                <i class="fas fa-print text-3xl accent-text"></i>
                <h1 class="text-2xl font-black tracking-tighter italic uppercase">Dollar <span class="accent-text">Printer</span></h1>
            </div>

            <div class="flex items-center gap-6">
                <div class="flex bg-black p-1 rounded-xl border border-gray-700">
                    <button id="demoTab" onclick="switchAcc('demo')" class="px-5 py-2 text-xs font-bold rounded-lg bg-[#00ff88] text-black">DEMO</button>
                    <button id="realTab" onclick="switchAcc('real')" class="px-5 py-2 text-xs font-bold rounded-lg text-gray-500 hover:text-white">REAL</button>
                </div>
                <div class="hidden md:block border-l border-gray-700 h-10 mx-2"></div>
                <div class="text-right">
                    <p class="text-[10px] text-gray-500 font-bold uppercase">Account Balance</p>
                    <p id="balance" class="text-xl font-mono font-black accent-text">$0.00</p>
                </div>
                <button onclick="login()" class="btn-glow bg-white text-black px-6 py-2.5 rounded-xl font-black text-xs transition-all uppercase tracking-widest">Connect Account</button>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            <div class="lg:col-span-8 space-y-6">
                <div class="printer-card p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xs font-black text-gray-400 uppercase tracking-widest">Live Digit Statistics (100 Ticks)</h2>
                        <span class="text-[10px] bg-blue-500/20 text-blue-400 px-2 py-1 rounded">V-100 Index</span>
                    </div>
                    <div id="digitStats" class="grid grid-cols-5 md:grid-cols-10 gap-2">
                        </div>
                </div>

                <div class="printer-card p-8 flex flex-col items-center justify-center relative overflow-hidden">
                    <div class="absolute top-4 left-4 flex gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></span>
                        <span class="text-[10px] text-gray-500 font-bold uppercase">Live Price Feed</span>
                    </div>
                    <h3 id="price" class="text-7xl font-black tracking-tighter mb-2">0.0000</h3>
                    <div class="flex gap-4 mt-2">
                        <div class="text-xs text-gray-500">Low: <span id="lowPrice" class="text-white">--</span></div>
                        <div class="text-xs text-gray-500">High: <span id="highPrice" class="text-white">--</span></div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-4 space-y-6">
                <div class="printer-card p-6 border-t-4 border-t-[#00ff88]">
                    <h2 class="text-xs font-black accent-text uppercase mb-6 tracking-widest"><i class="fas fa-robot mr-2"></i>Bot Configuration</h2>
                    
                    <div class="space-y-4">
                        <div class="space-y-2">
                            <label class="text-[10px] text-gray-500 font-bold uppercase">Select Strategy</label>
                            <select id="strategy" class="w-full bg-[#080a0d] border border-gray-700 p-3 rounded-xl text-sm font-bold text-[#00ff88] focus:border-[#00ff88] outline-none">
                                <option value="differ">Digit Differ (High Probability)</option>
                                <option value="over">Digit Over (Trend Follower)</option>
                                <option value="under">Digit Under (Safe Returns)</option>
                            </select>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div class="space-y-2">
                                <label class="text-[10px] text-gray-500 font-bold uppercase text-center block">Stake ($)</label>
                                <input id="stake" type="number" step="0.01" value="0.35" class="w-full bg-[#080a0d] border border-gray-700 p-3 rounded-xl text-center font-bold outline-none focus:border-[#00ff88]">
                            </div>
                            <div class="space-y-2">
                                <label class="text-[10px] text-gray-500 font-bold uppercase text-center block">Recovery (Mart)</label>
                                <input id="martingale" type="number" value="11" class="w-full bg-[#080a0d] border border-gray-700 p-3 rounded-xl text-center font-bold outline-none focus:border-[#00ff88]">
                            </div>
                        </div>

                        <button id="runBtn" onclick="togglePrinter()" class="w-full bg-[#00ff88] text-black font-black py-4 rounded-2xl uppercase tracking-widest text-sm btn-glow transition-all">Start Printing $</button>
                    </div>
                </div>

                <div class="printer-card p-6">
                    <h2 class="text-xs font-black text-gray-500 uppercase mb-4 tracking-widest">System Log</h2>
                    <div id="journal" class="journal-feed p-3 text-[10px] space-y-2 text-gray-400">
                        <div class="text-[#00ff88]/60 italic font-mono">> System bypass ready...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const APP_ID = '124737'; // YOUR PERSONAL ID
        let ws, isRunning = false, stats = Array(10).fill(0), totalTicks = 0;
        let currentStake = 0.35, accountMode = 'demo';

        function login() {
            window.location.href = `https://oauth.deriv.com/oauth2/authorize?app_id=${APP_ID}&l=en&brand=deriv`;
        }

        function switchAcc(m) {
            accountMode = m;
            document.getElementById('demoTab').className = m === 'demo' ? 'px-5 py-2 text-xs font-bold rounded-lg bg-[#00ff88] text-black' : 'px-5 py-2 text-xs font-bold rounded-lg text-gray-500';
            document.getElementById('realTab').className = m === 'real' ? 'px-5 py-2 text-xs font-bold rounded-lg bg-[#00ff88] text-black' : 'px-5 py-2 text-xs font-bold rounded-lg text-gray-500';
            addLog(`Switched to ${m.toUpperCase()} mode.`);
        }

        function togglePrinter() {
            if(isRunning) { location.reload(); return; }
            isRunning = true;
            document.getElementById('runBtn').innerText = "SYSTEM ACTIVE...";
            document.getElementById('runBtn').className = "w-full bg-red-600 text-white font-black py-4 rounded-2xl uppercase tracking-widest text-sm";
            connect();
        }

        function connect() {
            const token = localStorage.getItem('deriv_token');
            ws = new WebSocket(`wss://ws.binaryws.com/websockets/v3?app_id=${APP_ID}`);
            ws.onopen = () => ws.send(JSON.stringify({ authorize: token }));
            ws.onmessage = (msg) => {
                const data = JSON.parse(msg.data);
                if(data.msg_type === 'authorize') {
                    ws.send(JSON.stringify({ ticks: 'R_100', subscribe: 1 }));
                    document.getElementById('balance').innerText = `$${data.authorize.balance}`;
                }
                if(data.tick) {
                    const price = data.tick.quote;
                    const digit = parseInt(price.toString().slice(-1));
                    document.getElementById('price').innerText = price;
                    updateStats(digit);
                    if(isRunning) runStrategy(digit);
                }
                if(data.msg_type === 'proposal_open_contract' && data.proposal_open_contract.is_sold) {
                    handleResult(data.proposal_open_contract.profit);
                }
            };
        }

        function updateStats(digit) {
            stats[digit]++; totalTicks++;
            const grid = document.getElementById('digitStats');
            grid.innerHTML = '';
            stats.forEach((count, i) => {
                const perc = ((count / totalTicks) * 100).toFixed(1);
                grid.innerHTML += `
                    <div class="digit-stat p-2 rounded-lg text-center ${i === digit ? 'active' : ''}">
                        <p class="text-[8px] text-gray-500 font-bold">${i}</p>
                        <p class="text-xs font-black text-white">${perc}%</p>
                    </div>`;
            });
        }

        function runStrategy(digit) {
            const strat = document.getElementById('strategy').value;
            // High probability entry logic: wait for digit 5 to appear then enter differ
            if (digit === 5 && strat === 'differ') {
                buyContract('DIGITDIFF', 5);
            }
        }

        function buyContract(type, barrier) {
            ws.send(JSON.stringify({
                "buy": 1, "price": currentStake,
                "parameters": {
                    "amount": currentStake, "basis": "stake", "contract_type": type,
                    "currency": "USD", "duration": 1, "duration_unit": "t",
                    "symbol": "R_100", "barrier": barrier
                }
            }));
            addLog(`Order Placed: $${currentStake} on ${type}`);
        }

        function handleResult(profit) {
            if(profit < 0) {
                const mult = parseFloat(document.getElementById('martingale').value);
                currentStake *= mult;
                addLog(`<span class="text-red-500">LOSS: Recovering with x${mult} multiplier.</span>`);
            } else {
                currentStake = parseFloat(document.getElementById('stake').value);
                addLog(`<span class="text-[#00ff88]">PROFIT: $${profit.toFixed(2)} - Printer Successful.</span>`);
            }
        }

        function addLog(m) {
            const j = document.getElementById('journal');
            j.innerHTML = `<div class="border-b border-gray-800 pb-1">>> ${m}</div>` + j.innerHTML;
            j.scrollTop = 0;
        }
    </script>
</body>
</html>
